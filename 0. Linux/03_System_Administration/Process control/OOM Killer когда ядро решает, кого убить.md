#  
*–ì–ª—É–±–æ–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ ‚Äî –¥–ª—è Arch, systemd, DevOps-–Ω–∞–≥—Ä—É–∑–æ–∫*

> üêâ *¬´OOM Killer ‚Äî –Ω–µ –ø–∞–ª–∞—á. –≠—Ç–æ —Å—Ç—é–∞—Ä–¥ –Ω–∞ –±–æ—Ä—Ç—É —Å–∞–º–æ–ª—ë—Ç–∞: –∫–æ–≥–¥–∞ –∫–∏—Å–ª–æ—Ä–æ–¥–∞ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç ‚Äî –æ–Ω –Ω–∞–¥–µ–≤–∞–µ—Ç –º–∞—Å–∫—É –Ω–µ —Å–µ–±–µ, –∞ —Å–∏—Å—Ç–µ–º–µ.¬ª*  

---

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ OOM Killer –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?

–ö–æ–≥–¥–∞ **–≤—Å—è –¥–æ—Å—Ç—É–ø–Ω–∞—è –ø–∞–º—è—Ç—å –∏—Å—á–µ—Ä–ø–∞–Ω–∞** (–≤–∫–ª—é—á–∞—è swap), –∞ —è–¥—Ä–æ –Ω–µ –º–æ–∂–µ—Ç –≤—ã–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–∞–º—è—Ç–∏ –Ω–æ–≤–æ–º—É/—Ç–µ–∫—É—â–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É ‚Äî –Ω–∞—Å—Ç—É–ø–∞–µ—Ç *out-of-memory condition*.

–ë–µ–∑ OOM Killer:
- –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –±—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ `D` (uninterruptible sleep) –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ `malloc()`,
- –°–∏—Å—Ç–µ–º–∞ ‚Äî **–ø–æ–ª–Ω—ã–π –ª–æ–∫–¥–∞—É–Ω**: –¥–∞–∂–µ `Ctrl+Alt+F2` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

–° OOM Killer:
- –Ø–¥—Ä–æ **–≤—ã–±–∏—Ä–∞–µ—Ç "–∂–µ—Ä—Ç–≤—É"** ‚Äî –ø—Ä–æ—Ü–µ—Å—Å —Å –Ω–∞–∏–≤—ã—Å—à–∏–º `oom_score`,
- –£–±–∏–≤–∞–µ—Ç –µ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–º `SIGKILL`,
- –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –µ–≥–æ –ø–∞–º—è—Ç—å ‚Üí —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∂–∏—Ç—å.

>  –≠—Ç–æ **–ø–æ—Å–ª–µ–¥–Ω—è—è –ª–∏–Ω–∏—è –æ–±–æ—Ä–æ–Ω—ã**. –õ—É—á—à–µ –æ–¥–∏–Ω `firefox` –ø–æ–≥–∏–±, —á–µ–º –≤–µ—Å—å —Å–µ—Ä–≤–µ—Ä —É–π–¥—ë—Ç –≤ hard lock.

---

## 2. –ö–∞–∫ OOM Killer –≤—ã–±–∏—Ä–∞–µ—Ç –∂–µ—Ä—Ç–≤—É?

–ê–ª–≥–æ—Ä–∏—Ç–º (—É–ø—Ä–æ—â—ë–Ω–Ω–æ):

1. **–°–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã**, —É –∫–æ—Ç–æ—Ä—ã—Ö `oom_score_adj ‚â• -1000` (—Å–º. –Ω–∏–∂–µ).
2. –í—ã—á–∏—Å–ª—è–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ **`oom_score`** ‚Äî ¬´—Ü–µ–Ω—É —É–±–∏–π—Å—Ç–≤–∞¬ª.
3. –í—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å **–Ω–∞–∏–±–æ–ª—å—à–∏–º `oom_score`**.

### üìà `oom_score` = –±–∞–∑–æ–≤—ã–π —Å–∫–æ—Ä + `oom_score_adj`

| –§–∞–∫—Ç–æ—Ä | –í–ª–∏—è–Ω–∏–µ –Ω–∞ `oom_score` |
|--------|------------------------|
| **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏** | –ü—Ä—è–º–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —á–µ–º –±–æ–ª—å—à–µ RSS + swap + tmpfs, —Ç–µ–º –≤—ã—à–µ —Å–∫–æ—Ä |
| **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (`oom_score_adj`)** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —à—Ç—Ä–∞—Ñ/–±–æ–Ω—É—Å (–æ—Ç `-1000` –¥–æ `+1000`) |
| **root-–ø—Ä–æ—Ü–µ—Å—Å—ã** | –°–ª–µ–≥–∫–∞ –ø–æ–Ω–∏–∂–∞—é—Ç—Å—è (–Ω–æ –Ω–µ –∑–∞—â–∏—â–µ–Ω—ã!) |
| **–ü—Ä–æ—Ü–µ—Å—Å—ã —Å `CAP_SYS_ADMIN`** | –ù–µ–º–Ω–æ–≥–æ –ø–æ–Ω–∏–∂–∞—é—Ç—Å—è |
| **–ü—Ä–æ—Ü–µ—Å—Å—ã —Å `memcg`-–ª–∏–º–∏—Ç–∞–º–∏** | –£—á—ë—Ç –≤–µ–¥—ë—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ cgroup** |

> üìå –§–æ—Ä–º—É–ª–∞ (—è–¥—Ä–æ ‚â• 5.10):  
> ```
> oom_score = (–ø—Ä–æ—Ü–µ–Ω—Ç –ø–∞–º—è—Ç–∏, –∑–∞–Ω–∏–º–∞–µ–º–æ–π –ø—Ä–æ—Ü–µ—Å—Å–æ–º) + oom_score_adj
> ```
> –ú–∞–∫—Å–∏–º—É–º ‚Äî 1000 (100% –ø–∞–º—è—Ç–∏ + adj=0 ‚Üí 1000).  
> `oom_score_adj = -1000` ‚Üí `oom_score = 0` ‚Üí **–ø—Ä–æ—Ü–µ—Å—Å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç —É–±–∏—Ç**.

---

## üîç 3. –ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å OOM-—Å–æ–±—ã—Ç–∏—è?

### üîé 3.1. –õ–æ–≥–∏ —è–¥—Ä–∞ (–≥–ª–∞–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫)

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ OOM-—Å–æ–±—ã—Ç–∏—è:
sudo dmesg -T | grep -A 20 -B 5 "Out of memory\|Killed process"

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
# [–ü–Ω –¥–µ–∫  5 14:32:17 2025] Out of memory: Kill process 12345 (chromium) score 850 or sacrifice child
# [–ü–Ω –¥–µ–∫  5 14:32:17 2025] Killed process 12345 (chromium), UID 1000, total-vm:12458248kB, anon-rss:3842104kB, shmem-rss:2144kB