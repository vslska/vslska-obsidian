### 1. Установка и настройка (Arch)
```bash
# 1. Установка
sudo pacman -S yandex-cloud-cli

# 2. Аутентификация (через OAuth-токен)
yc init

# → откроется браузер → логинишься → копируешь токен
# → CLI запишет его в ~/.config/yandex-cloud/config

# 3. Проверка
yc config list
yc compute instance list
```

	Можно так же задать в ручную:
```bash
yc config set token "AQAAAA..."
yc config set cloud-id "b1g..."
yc config set folder-id "b1a..."	
```

### 2. Основные команды

|                     |                                             |                                  |
| ------------------- | ------------------------------------------- | -------------------------------- |
| **`yc compute`**    | `instance create`, `disk list`, `image get` | Управление ВМ, дисками, образами |
| **`yc vpc`**        | `network create`, `subnet list`             | Сети — основа всего              |
| **`yc storage`**    | `bucket create`, `object cp`                | S3-совместимое хранилище         |
| **`yc iam`**        | `token create`, `service-account get`       | Управление доступом (ключи, SA)  |
| **`yc logging`**    | `group list`, `export create`               | Логи → в Loki/Grafana            |
| **`yc monitoring`** | `alert create`, `dashboard list`            | Алерты и метрики                 |

#### Часто используемые one-liners
```bash
# Создать ВМ (как в веб-интерфейсе, но быстрее)
yc compute instance create \
  --name dragon-vm \
  --zone ru-central1-a \
  --network-interface subnet-name=default,nat-ip-version=ipv4 \
  --ssh-key ~/.ssh/id_ed25519.pub \
  --create-boot-disk image-folder-id=standard-images,image-family=ubuntu-2204-lts,size=20

# Получить внешний IP (полезно для скриптов)
yc compute instance get dragon-vm --format json | jq -r '.network_interfaces[0].primary_v4_address.one_to_one_nat.address'

# Залить файл в bucket
yc storage cp report.pdf storage://my-bucket/

# Создать статический ключ для service account (для Terraform)
yc iam service-account create --name terraform-sa
yc iam access-key create --service-account-name terraform-sa --output key.json
```

### 3. Работа с токенами и безопасностью
| Задача                              | Команда                           |
| ----------------------------------- | --------------------------------- |
| Получить IAM-токен (для API)        | `yc iam create-token`             |
| Узнать, под каким аккаунтом         | `yc config get account`           |
| Переключиться на другой профиль     | `yc config profile activate prod` |
| Экспортировать конфиг для Terraform |                                   |
```bash
export YC_TOKEN=$(yc iam create-token)
export YC_CLOUD_ID=$(yc config get cloud-id)
export YC_FOLDER_ID=$(yc config get folder-id)
```
Либо использовать `--format yaml/json` + `jq/yq`:
```bash
yc vpc subnet list --folder-id b1a... --format json | jq '.[].id'
```

### 4. Как интегрировать `yc` в workflow
- **Для Terraform**: `yc iam access-key create` → `key.json` → `provider "yandex" { service_account_key = file("key.json") }`
- **Для Ansible**: динамический инвентарь через `yc compute instance list --format json`
- **Для бэкапов**: `yc storage cp` → в `borg`-архив → в bucket
- **Для мониторинга**: `yc monitoring alert create` → в Telegram через вебхуки