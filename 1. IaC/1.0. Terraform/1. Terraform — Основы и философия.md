

> *¬´Terraform ‚Äî –Ω–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–±–ª–∞–∫–æ–≤.  
> –≠—Ç–æ ‚Äî –¥–æ–≥–æ–≤–æ—Ä —Å —Ö–∞–æ—Å–æ–º:  
> ‚Äú–Ø –æ–ø–∏—à—É –∂–µ–ª–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.  
> –¢—ã ‚Äî –ø—Ä–∏–≤–µ–¥–∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –∫ –Ω–µ–º—É.  
> –ë–µ–∑ —à—É–º–∞. –ë–µ–∑ –±–æ–ª–∏. –ë–µ–∑ –∏–º–ø–µ—Ä–∞—Ç–∏–≤–∞.‚Äù¬ª*  
> ‚Äî technology-dragon, 2025

---

###  1. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è (–ø–æ-–º–æ–µ–º—É)

| –¢–µ—Ä–º–∏–Ω                          | –ß—Ç–æ —ç—Ç–æ                                          | –ê–Ω–∞–ª–æ–≥–∏—è                                                 |
| ------------------------------- | ------------------------------------------------ | -------------------------------------------------------- |
| **Provider**                    | –î—Ä–∞–π–≤–µ—Ä –¥–ª—è –æ–±–ª–∞–∫–∞ (AWS, YC, GCP)                | *¬´–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫: —è –≥–æ–≤–æ—Ä—é –Ω–∞ HCL ‚Äî –æ–±–ª–∞–∫–æ –ø–æ–Ω–∏–º–∞–µ—Ç –Ω–∞ API¬ª* |
| **Resource**                    | –û–±—ä–µ–∫—Ç –≤ –æ–±–ª–∞–∫–µ (–í–ú, bucket, —Å–µ—Ç—å)               | *¬´–°—Ç—Ä–æ–∫–∞ –≤ –ø–∞—Ä—Ç–∏—Ç—É—Ä–µ: ‚Äú–ó–¥–µ—Å—å ‚Äî nginx. –ó–¥–µ—Å—å ‚Äî –±–∞–∑–∞‚Äù¬ª*    |
| **State (`terraform.tfstate`)** | –°–Ω–∏–º–æ–∫ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã         | *¬´–ü–∞–º—è—Ç—å —Å–∏—Å—Ç–µ–º—ã: ‚Äú–Ø –ø–æ–º–Ω—é, —á—Ç–æ –ø–æ—Å—Ç—Ä–æ–∏–ª‚Äù¬ª*              |
| **Plan / Apply**                | `plan` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, `apply` ‚Äî –ø—Ä–∏–º–µ–Ω–∏—Ç—å | *¬´–°–Ω–∞—á–∞–ª–∞ ‚Äî —Ä–µ–ø–µ—Ç–∏—Ü–∏—è. –ü–æ—Ç–æ–º ‚Äî —Å–ø–µ–∫—Ç–∞–∫–ª—å¬ª*               |
| **Module**                      | –ü–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –±–ª–æ–∫ (–∫–∞–∫ Role –≤ Ansible)  | *¬´–ì–æ—Ç–æ–≤—ã–π –º–æ–¥—É–ª—å —É—Ä–æ–∫–∞: ‚ÄúDocker –≤ YC –∑–∞ 5 –º–∏–Ω—É—Ç‚Äù¬ª*       |

---

### 2.  üõ† –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Ü–∏–∫–ª

```bash
# 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Å–∫–∞—á–∞–µ—Ç provider)
terraform init

# 2. –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Äî –î–ï–õ–ê–ô –í–°–ï–ì–î–ê
terraform plan

# 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
terraform apply

# 4. –£–Ω–∏—á—Ç–æ–∂–∏—Ç—å ‚Äî –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!
terraform destroy
```

–í CI/CD –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
```bash
terraform plan -out=tfplan && terraform apply tfplan
```

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–º–∏–Ω–∏–º–∞–ª–∏–∑–º)
```bash
yc-vm/
‚îú‚îÄ‚îÄ main.tf          # —Ä–µ—Å—É—Ä—Å—ã
‚îú‚îÄ‚îÄ variables.tf     # –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
‚îú‚îÄ‚îÄ outputs.tf       # —á—Ç–æ –≤–µ—Ä–Ω—É—Ç—å (IP, ID‚Ä¶)
‚îú‚îÄ‚îÄ terraform.tfvars # –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–Ω–µ –≤ Git!)
‚îî‚îÄ‚îÄ .gitignore

```
#### `main.tf` ‚Äî –ø—Ä–∏–º–µ—Ä: –í–ú –≤ Yandex Cloud
```hcl
provider "yandex" {
  token     = var.yc_token
  cloud_id  = var.yc_cloud_id
  folder_id = var.yc_folder_id
  zone      = "ru-central1-a"
}

resource "yandex_compute_instance" "vm" {
  name = "dragon-vm"

  resources {
    cores  = 2
    memory = 2
  }

  boot_disk {
    initialize_params {
      image_id = "fd8iv5v47ss5p3s1vkgc"  # Ubuntu 22.04 LTS
      size     = 20
    }
  }

  network_interface {
    subnet_id = yandex_vpc_subnet.subnet.id
    nat       = true
  }

  metadata = {
    ssh-keys = "ubuntu:${file("~/.ssh/id_ed25519.pub")}"
  }
}

# –°–µ—Ç—å –∏ –ø–æ–¥—Å–µ—Ç—å ‚Äî –≤—ã–Ω–µ—Å–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ (—á–∏—Å—Ç–æ—Ç–∞!)
resource "yandex_vpc_network" "net" {
  name = "dragon-net"
}

resource "yandex_vpc_subnet" "subnet" {
  name       = "dragon-subnet"
  zone       = "ru-central1-a"
  network_id = yandex_vpc_network.net.id
  v4_cidr_blocks = ["10.0.1.0/24"]
}
```

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∏–ª—å
| –°–æ–≤–µ—Ç                             | –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ!                                                                  |
| --------------------------------- | ------------------------------------------------------------------------------ |
| ‚ùå –ù–µ —Ö—Ä–∞–Ω–∏—Ç—å `token` –≤ –∫–æ–¥–µ       | ‚Üí –ò—Å–ø–æ–ª—å–∑—É–π `variables.tf` + `terraform.tfvars` (–≤ `.gitignore`)               |
| ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sensitive = true` | –î–ª—è –ø–∞—Ä–æ–ª–µ–π, –∫–ª—é—á–µ–π: `variable "yc_token" { type = string; sensitive = true }` |
| ‚úÖ –í–Ω–µ—à–Ω–∏–π state ‚Äî —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ–¥–µ  | –õ–æ–∫–∞–ª—å–Ω–æ ‚Äî `local`, –≤ –∫–æ–º–∞–Ω–¥–µ ‚Äî `yc s3 bucket` –∏–ª–∏ `terraform cloud`           |
| ‚úÖ `terraform fmt` ‚Üí –≤—Å–µ–≥–¥–∞        | –ö–∞–∫ `black` –¥–ª—è Python ‚Äî –∫—Ä–∞—Å–æ—Ç–∞ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ                            |
	–ò–∑—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `locals` –¥–ª—è  –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö  –∑–Ω–∞—á–µ–Ω–∏–π:
```hcl
locals {
  instance_name = "dragon-${var.env}-${var.app}"
  tags = {
    owner = "technology-dragon"
    env   = var.env
  }
}
```

- –ù–µ –±–æ—è—Ç—å—Å—è `terraform console` ‚Äî —Ç–∞–º –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏—è _–¥–æ_ `apply`.
- –ù–µ –¥–µ–ª–∞—Ç—å `apply` –±–µ–∑ `plan` ‚Üí —ç—Ç–æ –∫–∞–∫ `rm -rf /` –±–µ–∑ `ls`.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å`terraform graph | dot -Tpng > graph.png` ‚Äî —á—Ç–æ–±—ã _—É–≤–∏–¥–µ—Ç—å_ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
- –ü–∏—Å–∞—Ç—å `outputs.tf` ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ —Å–µ–π—á–∞—Å –Ω–µ –Ω—É–∂–Ω–æ. –ß–µ—Ä–µ–∑ –º–µ—Å—è—Ü —Ç—ã _–±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω_ —Å–µ–±–µ.

